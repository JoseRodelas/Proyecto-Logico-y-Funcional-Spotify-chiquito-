<!-- Top Banner -->
<div class="bg-dark text-white text-center py-2 small" style="width: 100%;">
  Proyecto De Programacion Logica Y Funcional
</div>

<!-- Navbar -->
<header class="navbar navbar-expand-lg shadow-sm px-4 py-3" style="width: 100%;">
  <div class="container-fluid d-flex flex-wrap align-items-center justify-content-between">

    <!-- Logo -->
    <span class="navbar-brand fw-bold fs-4 mx-auto mx-lg-0 text-center text-lg-start">
      <img src="assets/images/logo-spotify-smart.png" class="logo-spotify" alt="Spotify Logo">
    </span>

    <!-- Enlaces de navegación -->
    <nav class="d-flex flex-wrap gap-2 justify-content-center" style="flex-grow: 1;">
      <a href="/home" class="nav-link">Inicio</a>
      <a href="/favorites" class="nav-link">Favoritos</a>
      <a href="/about" class="nav-link">Acerca Del Equipo</a>
      <a *ngIf="!usuarioLogueado" href="/login" class="nav-link fw-bold">Iniciar Sesión</a>
      <a *ngIf="usuarioLogueado" (click)="cerrarSesion()" class="nav-link text-danger fw-bold" style="cursor: pointer;">Cerrar Sesión</a>
    </nav>

<!-- Buscador + Modo oscuro + Nombre de usuario -->
<div class="d-flex align-items-center gap-2 ms-auto mt-2 mt-lg-0" style="max-width: 100%; position: relative;">
  <!-- Contenedor del buscador -->
  <div #buscadorContainer style="position: relative; width: 250px;">
    <form class="d-flex" (submit)="buscarCanciones(); $event.preventDefault()">
      <input class="form-control me-2 w-100" type="search" [(ngModel)]="textoBusqueda" name="busqueda" placeholder="Buscar canciones..." />
      <button class="btn btn-outline-secondary" type="submit">
        <i class="fas fa-search"></i>
      </button>
    </form>

    <!-- Dropdown flotante de resultados -->
    <div *ngIf="resultadosBusqueda && resultadosBusqueda.length > 0"
         class="list-group shadow-sm mt-1"
         style="position: absolute; top: 100%; left: 0; width: 100%; z-index: 999;">
      <div *ngFor="let cancion of resultadosBusqueda"
           class="list-group-item d-flex justify-content-between align-items-center small">
        <div class="d-flex align-items-center gap-2">
          <img [src]="cancion.album.images[0]?.url" alt="Portada" class="rounded"
               style="width: 40px; height: 40px; object-fit: cover;">
          <div>
            <div class="fw-bold text-truncate" style="max-width: 100px;">{{ cancion.name }}</div>
            <div class="text-muted small text-truncate" style="max-width: 100px;">{{ cancion.artists[0]?.name }}</div>
          </div>
        </div>
        <button (click)="reproducir(cancion.uri)"
                class="btn btn-success btn-sm px-3 py-1"
                style="background-color: #1DB954; border: none; border-radius: 20px; font-weight: bold;">
          ▶
        </button>
      </div>
    </div>
  </div>


  <!-- Nombre de usuario -->
  <span *ngIf="nombreUsuario" class="fw-bold ms-2">
    Bienvenido, {{ nombreUsuario.nombre }}
  </span>

  <!-- Botón de tema -->
  <button class="btn btn-outline-secondary" (click)="toggleTheme()">
    <i [ngClass]="theme === 'light-theme' ? 'bi bi-moon' : 'bi bi-sun'"></i>
  </button>
</div>



<router-outlet></router-outlet>
<app-player></app-player>

<!-- Footer -->
<div class="row gy-4">
  <div class="col-12 col-md-3">
    <h3>Exclusive</h3>
    <p>Subscribe</p>
    <p>Get 10% off your first order</p>
    <div class="d-flex flex-column flex-md-row">
      <input type="email" class="form-control mb-2 mb-md-0 me-md-2" placeholder="Enter your email" />
      <button class="btn btn-light">&gt;</button>
    </div>
  </div>
  <div class="col-12 col-md-2">
    <h5>Support</h5>
    <p>111 Bijoy sarani, Dhaka, DH 1515, Bangladesh.</p>
    <p>exclusive@gmail.com</p>
    <p>+88015-88888-9999</p>
  </div>
  <div class="col-12 col-md-2">
    <h5>Account</h5>
    <p>My Account</p>
    <p>Login / Register</p>
    <p>Cart</p>
    <p>Wishlist</p>
    <p>Shop</p>
  </div>
  <div class="col-12 col-md-2">
    <h5>Quick Link</h5>
    <p>Privacy Policy</p>
    <p>Terms Of Use</p>
    <p>FAQ</p>
    <p>Contact</p>
  </div>
  <div class="col-12 col-md-3">
    <h5>Download App</h5>
    <p>Save $3 with App New User Only</p>
    <img src="assets/images/qr-code.png" alt="QR Code" class="img-fluid mb-2" style="width: 80%; max-width: 200px;" />
    <div class="d-flex flex-wrap mb-2">
      <img src="assets/images/google-play.png" alt="Google Play" class="me-2 mb-2" style="width: 45%; max-width: 150px;" />
      <img src="assets/images/app-store.png" alt="App Store" style="width: 45%; max-width: 150px;" />
    </div>
    <div class="d-flex gap-2">
      <i class="fab fa-facebook-f"></i>
      <i class="fab fa-twitter"></i>
      <i class="fab fa-instagram"></i>
      <i class="fab fa-linkedin-in"></i>
    </div>
  </div>
</div>

<div class="bg-black text-secondary text-center py-2 small">
  © Copyright Rimel 2025. All right reserved
</div>
